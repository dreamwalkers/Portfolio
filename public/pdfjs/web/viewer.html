<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>PDF Viewer</title>
    <style>
      html,body{height:100%}
      body{margin:0;font-family:Arial,Helvetica,sans-serif;background:#fff}
      .toolbar{display:flex;align-items:center;gap:8px;padding:8px;border-bottom:1px solid #ddd;background:#fff}
      .toolbar .spacer{flex:1}
      .viewer-frame{display:block;width:100%;height:calc(100vh - 44px);border:0;margin:0;padding:0}
      a.button{padding:6px 10px;border:1px solid #ccc;background:#f7f7f7;color:#0366d6;text-decoration:none;border-radius:3px}
      /* ensure no body padding that could center the PDF */
      iframe{display:block}
    </style>
  </head>
  <body>
    <div class="toolbar">
      <div class="spacer"></div>
      <a id="openNew" class="button" target="_blank">Open in new tab</a>
      <a id="download" class="button" download>Download</a>
    </div>
    <iframe id="viewer" class="viewer-frame" src="about:blank" title="Embedded PDF" ></iframe>

    <script>
      function getQuery(){
        const q = location.search.slice(1).split('&').reduce((acc,p)=>{const [k,v]=p.split('=');if(k)acc[decodeURIComponent(k)]=decodeURIComponent(v||'');return acc},{})
        return q
      }
      const q = getQuery();
      const file = q.file || ''
      const viewer = document.getElementById('viewer')
      const openNew = document.getElementById('openNew')
      const download = document.getElementById('download')
      function setSrc(url){
        viewer.src = url
        openNew.href = url
        download.href = url
      }
      if (file){
        // if file is an encoded URL (passed by encodeURIComponent), try to decode once
        try{ setSrc(decodeURIComponent(file)) }catch(e){ setSrc(file) }
      } else {
        document.body.innerHTML = '<div style="padding:20px">No file specified. Use <code>?file=/assets/your.pdf</code></div>'
      }
    </script>
  </body>
</html>
